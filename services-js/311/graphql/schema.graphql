input CreateRequestAttribute {
  code: String!
  value: String!
}

input LatLng {
  lat: Float!
  lng: Float!
}

type Mutation {
  createRequest(code: String!, description: String!, firstName: String, lastName: String, email: String, phone: String, address: String, location: LatLng, attributes: [CreateRequestAttribute!]!): Request!
}

type Query {
  services: [Service!]!
  service(code: String!): Service
}

type Request {
  id: String!
  service: Service!
  description: String
  status: String!
  requestedAt: Int!
  updatedAt: Int!
}

type Service {
  code: String!
  name: String!
  locationRequired: Boolean!
  hasMetadata: Boolean!
  metadata: ServiceMetadata
}

type ServiceMetadata {
  attributes: [ServiceMetadataAttribute!]!
}

type ServiceMetadataAttribute {
  type: ServiceMetadataAttributeDatatype!
  required: Boolean!
  order: Int
  description: String!
  code: String!
  dependencies: ServiceMetadataAttributeConditional
  values: [ServiceMetadataAttributeValue!]
  conditionalValues: [ServiceMetadataAttributeConditionalValues!]
}

type ServiceMetadataAttributeCondition {
  attribute: String!
  op: ServiceMetadataAttributeConditionalOp!
  value: ServiceMetadataAttributeConditionValue!
}

type ServiceMetadataAttributeConditional {
  clause: ServiceMetadataAttributeConditionalClause!
  conditions: [ServiceMetadataAttributeCondition!]!
}

enum ServiceMetadataAttributeConditionalClause {
  AND
  OR
}

enum ServiceMetadataAttributeConditionalOp {
  eq
  neq
  in
  gt
  gte
  lt
  lte
}

type ServiceMetadataAttributeConditionalValues {
  dependentOn: ServiceMetadataAttributeConditional!
  values: [ServiceMetadataAttributeValue!]!
}

type ServiceMetadataAttributeConditionValue {
  type: ServiceMetadataAttributeConditionValueType
  string: String
  array: [String!]
  number: Float
}

enum ServiceMetadataAttributeConditionValueType {
  STRING
  STRING_ARRAY
  NUMBER
}

enum ServiceMetadataAttributeDatatype {
  BOOLEAN_CHECKBOX
  INFORMATIONAL
  MULTIVALUELIST
  NUMBER
  DATETIME
  DATE
  SINGLEVALUELIST
  STRING
  TEXT
}

type ServiceMetadataAttributeValue {
  key: String!
  name: String!
}
